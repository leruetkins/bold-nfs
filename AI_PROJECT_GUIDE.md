# AI Project Guide: Bold NFS Server

## –†–µ–∑—é–º–µ

–ü—Ä–æ–µ–∫—Ç **Bold** ‚Äî —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ Network File System (NFS) –≤–µ—Ä—Å–∏–∏ 4.0, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º Rust —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Tokio. –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π, –Ω–∞–¥–µ–∂–Ω—ã–π, –ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–π, —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π NFS-—Å–µ—Ä–≤–µ—Ä.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å Cargo-–≤–æ—Ä–∫—Å–ø–µ–π—Å–æ–º, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–º –Ω–∞ —Ç—Ä–∏ –∫—Ä–µ–π—Ç–∞:
1.  `proto`: –°–æ–¥–µ—Ä–∂–∏—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–¥–µ–∫–∏ –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ RPC –∏ NFSv4, –∏—Å–ø–æ–ª—å–∑—É—è `serde-xdr`.
2.  `lib`: –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, —Ä–µ–∞–ª–∏–∑—É—é—â–∞—è –ª–æ–≥–∏–∫—É NFS-—Å–µ—Ä–≤–µ—Ä–∞. –û–Ω–∞ –≤–∫–ª—é—á–∞–µ—Ç –∞–∫—Ç–æ—Ä—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏ (`ClientManager`) –∏ —Ñ–∞–π–ª–∞–º–∏/—Ñ–∞–π–ª–æ–≤—ã–º–∏ —Ö–µ–Ω–¥–ª–∞–º–∏ (`FileManager`), –∞ —Ç–∞–∫–∂–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ–ø–µ—Ä–∞—Ü–∏–π NFSv4.0. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `vfs`.
3.  `exec`: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–≤–∞ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: `bold-mem` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –≤ –ø–∞–º—è—Ç–∏ –∏ `bold-nfs` –¥–ª—è "—Ä–∞—Å—à–∞—Ä–∏–≤–∞–Ω–∏—è" —Ä–µ–∞–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

–¢–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ —è–≤–ª—è–µ—Ç—Å—è TCP-—Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ RPC-—Å–æ–æ–±—â–µ–Ω–∏—è, —Ä–∞–∑–±–∏—Ä–∞–µ—Ç –∏—Ö –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç NFS-–æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Ä–∞–º–∫–∞—Ö `COMPOUND` –∑–∞–ø—Ä–æ—Å–∞. –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —Ñ–∞–π–ª–æ–≤—ã—Ö —Ö–µ–Ω–¥–ª–æ–≤ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ —á–µ—Ä–µ–∑ –∞–∫—Ç–æ—Ä—ã, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å.

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1.  [Overview](#1-overview)
2.  [Architecture](#2-architecture)
3.  [Back-end](#3-back-end)
4.  [Front-end](#4-front-end)
5.  [Data & Storage](#5-data--storage)
6.  [External & Integrations](#6-external--integrations)
7.  [Build & Run](#7-build--run)
8.  [Quality & Ops](#8-quality--ops)
9.  [Conventions & Examples](#9-conventions--examples)
10. [Open Questions & Risks](#10-open-questions--risks)
11. [Changelog Summary](#11-changelog-summary)

---

## 1. Overview

**–¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞:**
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–º, –±–µ–∑ –∏–∑–ª–∏—à–Ω–∏—Ö —É—Å–ª–æ–∂–Ω–µ–Ω–∏–π –∏ "–º–∞–≥–∏–∏" —Ç–∏–ø–æ–≤/–º–∞–∫—Ä–æ—Å–æ–≤.
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** –°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–º –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏.
- **–ü–æ—Ä—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –û–°, –≥–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç Rust/Tokio.
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∑–≤–æ–ª—è—Ç—å –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–æ–≤—ã—Ö –º–∏–Ω–æ—Ä–Ω—ã—Ö –≤–µ—Ä—Å–∏–π NFS –∏ –Ω–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤.

**–î–æ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—Å—Ç—å:**
–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—É—é —á–∞—Å—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ NFSv4.0. –≠—Ç–æ —Å–µ—Ç–µ–≤–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –∫–ª–∏–µ–Ω—Ç–∞–º –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ —Ç–∞–∫, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –æ–Ω–∏ –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ. –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:
- **–§–∞–π–ª–æ–≤—ã–µ —Ö–µ–Ω–¥–ª—ã (Filehandles):** –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª–∏–µ–Ω—Ç–æ–º –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—ä–µ–∫—Ç–∞–º.
- **–û–ø–µ—Ä–∞—Ü–∏–∏ (Operations):** –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `LOOKUP`, `READ`, `WRITE`, `CREATE`).
- **COMPOUND-–∑–∞–ø—Ä–æ—Å—ã:** –ü–∞–∫–µ—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∞—Ç–æ–º–∞—Ä–Ω–æ.
- **–ö–ª–∏–µ–Ω—Ç—ã (Clients) –∏ —Å–µ—Å—Å–∏–∏:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.
- **–ê—Ç—Ä–∏–±—É—Ç—ã:** –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤ (—Ä–∞–∑–º–µ—Ä, –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞, –≤—Ä–µ–º—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Ç.–¥.).
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (Locking):** –ú–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ñ–∞–π–ª–∞–º.

---

## 2. Architecture

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –≤ –≤–∏–¥–µ Cargo-–≤–æ—Ä–∫—Å–ø–µ–π—Å–∞.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–æ—Ä–∫—Å–ø–µ–π—Å–∞:**
- **`proto`**: –ö—Ä–µ–π—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º. –û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ (–¥–µ)—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é XDR-—Å–æ–æ–±—â–µ–Ω–∏–π.
  - [`proto/src/rpc_proto.rs`](proto/src/rpc_proto.rs): –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è –æ–±—â–µ–≥–æ RPC-–ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (–Ω–∞ –æ—Å–Ω–æ–≤–µ RFC 1057).
  - [`proto/src/nfs4_proto.rs`](proto/src/nfs4_proto.rs): –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ NFSv4.0 (–Ω–∞ –æ—Å–Ω–æ–≤–µ RFC 7530). –î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–µ-ASCII —Å–∏–º–≤–æ–ª–æ–≤, –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ –∏ –¥—Ä—É–≥–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –Ω–µ-ASCII —Å—Ç—Ä–æ–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ `Vec<u8>`, –∞ –Ω–µ `String`.
  - [`proto/src/lib.rs`](proto/src/lib.rs): –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `XDRProtoCodec` –¥–ª—è `tokio-util`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –±–∞–π—Ç–æ–≤—ã–π –ø–æ—Ç–æ–∫ TCP –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å RPC-—Å–æ–æ–±—â–µ–Ω–∏–π.
- **`lib`**: –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.
  - [`lib/src/lib.rs`](lib/src/lib.rs): –°–æ–¥–µ—Ä–∂–∏—Ç `NFSServer` –∏ `ServerBuilder`. –ó–¥–µ—Å—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.
  - [`lib/src/server/mod.rs`](lib/src/server/mod.rs): –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç—Ä–µ–π—Ç `NfsProtoImpl` –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `NFSService`, –∫–æ—Ç–æ—Ä–∞—è –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑—É–µ—Ç –≤—ã–∑–æ–≤—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.
  - [`lib/src/server/nfs40.rs`](lib/src/server/nfs40.rs): –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `NfsProtoImpl` –¥–ª—è NFSv4.0. –î–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑ `COMPOUND`-–∑–∞–ø—Ä–æ—Å–∞.
  - [`lib/src/server/nfs40/op_*.rs`](lib/src/server/nfs40/op_*.rs): –ú–æ–¥—É–ª–∏, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ –ª–æ–≥–∏–∫—É –æ—Ç–¥–µ–ª—å–Ω—ã—Ö NFS-–æ–ø–µ—Ä–∞—Ü–∏–π (`GETATTR`, `LOOKUP` –∏ —Ç.–¥.).
  - [`lib/src/server/filemanager/mod.rs`](lib/src/server/filemanager/mod.rs): –ê–∫—Ç–æ—Ä `FileManager`, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (—Ö–µ–Ω–¥–ª—ã, –∞—Ç—Ä–∏–±—É—Ç—ã, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏).
  - [`lib/src/server/clientmanager.rs`](lib/src/server/clientmanager.rs): –ê–∫—Ç–æ—Ä `ClientManager`, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–ª–∏–µ–Ω—Ç–æ–≤.
- **`exec`**: –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã.
  - [`exec/src/main.rs`](exec/src/main.rs): –ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª `bold-mem` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ —Å VFS –≤ –ø–∞–º—è—Ç–∏.
  - [`exec/src/main_real_fs.rs`](exec/src/main_real_fs.rs): –ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª `bold-nfs` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ —Å —Ä–µ–∞–ª—å–Ω–æ–π –§–°.

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö (Data Flow):**
1. –ö–ª–∏–µ–Ω—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º.
2. `NFSServer` –≤ [`lib/src/lib.rs`](lib/src/lib.rs) –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.
3. `XDRProtoCodec` –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç –±–∞–π—Ç–æ–≤—ã–π –ø–æ—Ç–æ–∫ –≤ `RpcCallMsg`.
4. `NFSService` –ø–æ–ª—É—á–∞–µ—Ç `RpcCallMsg` –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ —É —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (`NFS40Server`).
5. `NFS40Server` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `COMPOUND`-–∑–∞–ø—Ä–æ—Å, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—è –∫–∞–∂–¥—É—é –æ–ø–µ—Ä–∞—Ü–∏—é.
6. –ö–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (`op_*.rs`) –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å `FileManager` –∏ `ClientManager` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è.
7. `FileManager` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `vfs` –∫—Ä–µ–π—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–∏–∂–µ–ª–µ–∂–∞—â–µ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π (—Ä–µ–∞–ª—å–Ω–æ–π –∏–ª–∏ –≤ –ø–∞–º—è—Ç–∏).
8. –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≤ `RpcReplyMsg` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É —á–µ—Ä–µ–∑ `XDRProtoCodec`.

**–ö–ª—é—á–µ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `tokio`: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–∞–Ω—Ç–∞–π–º.
- `serde`, `serde-xdr`: –î–ª—è (–¥–µ)—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
- `vfs`: –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π.
- `clap`: –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.
- `tracing`: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.
- `multi_index_map`: –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–∏—Å–∫–∞ –ø–æ —Ä–∞–∑–Ω—ã–º –∫–ª—é—á–∞–º.

---

## 3. Back-end

–ë—ç–∫–µ–Ω–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –µ–¥–∏–Ω—ã–π TCP-—Å–µ—Ä–≤–µ—Ä, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Rust.

**–§—Ä–µ–π–º–≤–æ—Ä–∫–∏:**
- –û—Å–Ω–æ–≤–∞: `tokio`.
- –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ä–∞–±–æ—Ç–∞ —Å TCP.

**–¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞:**
- `main()` –≤ [`exec/src/main.rs`](exec/src/main.rs) (`bold-mem`).
- `main()` –≤ [`exec/src/main_real_fs.rs`](exec/src/main_real_fs.rs) (`bold-nfs`).

–û–±–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ —Å–æ–∑–¥–∞—é—Ç `ServerBuilder`, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É—é—Ç –µ–≥–æ –∏ –≤—ã–∑—ã–≤–∞—é—Ç `server.start()`, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç `tokio` —Ä–∞–Ω—Ç–∞–π–º –∏ –≤–µ—á–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–∏–µ–º–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

**–ú–∞—Ä—à—Ä—É—Ç—ã –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (NFS Operations):**
–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ `NFS40Server::compound`. –ö–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –∏–∑ `argarray` `COMPOUND`-–∑–∞–ø—Ä–æ—Å–∞ –º–∞—Ç—á–∏—Ç—Å—è –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É –º–æ–¥—É–ª—é `op_*.rs`.

–ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:
- `op_set_clientid`, `op_set_clientid_confirm`: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞.
- `op_putfh`, `op_putrootfh`: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö–µ–Ω–¥–ª–∞.
- `op_getattr`: –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ —Ñ–∞–π–ª–∞.
- `op_lookup`: –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.
- `op_read`, `op_write`: –ß—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö.
- `op_create`, `op_remove`: –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤.
- `op_open`, `op_close`: –û—Ç–∫—Ä—ã—Ç–∏–µ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–æ–≤ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.

**Middleware (Actors):**
–í–º–µ—Å—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ middleware –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–∫—Ç–æ—Ä—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª—è–µ–º—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:
- `ClientManager`: –£–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∫–ª–∏–µ–Ω—Ç–æ–≤. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ [`lib/src/lib.rs`](lib/src/lib.rs) –∏ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ `ClientManagerHandle`.
- `FileManager`: –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Ö–µ–Ω–¥–ª–∞–º–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏, –∫–µ—à–µ–º –∑–∞–ø–∏—Å–∏. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–∞–º –∂–µ –∏ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ `FileManagerHandle`.
–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∞–∫—Ç–æ—Ä–∞–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ `mpsc` –∫–∞–Ω–∞–ª–∞–º.

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ `ServerBuilder` ([`lib/src/lib.rs:132`](lib/src/lib.rs:132)).
- –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `clap` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (–ø—É—Ç—å –∫ –§–°, —Ñ–ª–∞–≥ –¥–µ–±–∞–≥–∞).
- `bold-mem` –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞–µ—Ç YAML-—Ñ–∞–π–ª –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –≤ –ø–∞–º—è—Ç–∏.

---

## 4. Front-end

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥. –≠—Ç–æ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –±—ç–∫–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (NFS-—Å–µ—Ä–≤–µ—Ä).

---

## 5. Data & Storage

**–°—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü (In-memory DB):**
–•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –ø–∞–º—è—Ç–∏ —Å –ø–æ–º–æ—â—å—é `HashMap` –∏ `multi_index_map`.

- **`ClientManager`**:
  - `db: MultiIndexClientEntryMap`: –•—Ä–∞–Ω–∏—Ç –∑–∞–ø–∏—Å–∏ –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö (`ClientEntry`). –ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å –±—ã—Å—Ç—Ä—ã–µ –≤—ã–±–æ—Ä–∫–∏ –ø–æ `principal`, `verifier`, `id`, `clientid`, `setclientid_confirm`.
    - [`lib/src/server/clientmanager.rs:31`](lib/src/server/clientmanager.rs:31). –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª–∏–µ–Ω—Ç–∞ (`id`) —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –≤–∏–¥–µ `Vec<u8>` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ UTF-8.
- **`FileManager`**:
  - `fhdb: FilehandleDb`: –ò–Ω–¥–µ–∫—Å –¥–ª—è `Filehandle` –ø–æ `id` (NfsFh4) –∏ `path` (String).
    - [`lib/src/server/filemanager/filehandle.rs`](lib/src/server/filemanager/filehandle.rs)
  - `lockdb: LockingStateDb`: –ò–Ω–¥–µ–∫—Å –¥–ª—è `LockingState` –ø–æ `filehandle_id` –∏ `stateid`.
    - [`lib/src/server/filemanager/locking.rs`](lib/src/server/filemanager/locking.rs)
  - `cachedb: HashMap<NfsFh4, WriteCacheHandle>`: –ö–µ—à –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏.

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**
–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, —Ç–∞–∫ –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–∞.

**–°–≤—è–∑–∏:**
- `ClientEntry` –Ω–µ –∏–º–µ–µ—Ç –ø—Ä—è–º—ã—Ö —Å–≤—è–∑–µ–π —Å –¥—Ä—É–≥–∏–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏.
- `Filehandle` —Å–≤—è–∑–∞–Ω —Å `LockingState` —á–µ—Ä–µ–∑ `filehandle.id`. `FileManager` "–ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç" –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫ —Ñ–∞–π–ª–æ–≤–æ–º—É —Ö–µ–Ω–¥–ª—É –ø—Ä–∏ –µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏–∏.

**–•—Ä–∞–Ω–∏–ª–∏—â–µ:**
- –û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ ‚Äî —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è `vfs::VfsPath`.
- `bold-mem` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `vfs::MemoryFS`.
- `bold-nfs` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `vfs::PhysicalFS`, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –æ–±–µ—Ä—Ç–∫–æ–π –Ω–∞–¥ —Ä–µ–∞–ª—å–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –û–°.

---

## 6. External & Integrations

- **NFS Client:** –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚Äî —ç—Ç–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ª—é–±—ã–º NFSv4.0-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `mount.nfs4` –≤ Linux).
- **API:** –í–Ω–µ—à–Ω–∏–π API ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª NFSv4.0 –ø–æ–≤–µ—Ä—Ö RPC.
- **–ë—Ä–æ–∫–µ—Ä—ã / –û—á–µ—Ä–µ–¥–∏:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.
- **SMTP:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

---

## 7. Build & Run

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏:**
- –°–±–æ—Ä–∫–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞: `cargo build`
- –°–±–æ—Ä–∫–∞ –≤ release-—Ä–µ–∂–∏–º–µ: `cargo build --release`

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.

**–ü—Ä–æ—Ñ–∏–ª–∏ –∑–∞–ø—É—Å–∫–∞:**

1.  **In-memory FS (`bold-mem`)**
    - –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –≤ –ø–∞–º—è—Ç–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –≤ YAML-—Ñ–∞–π–ª–µ.
    - **–ö–æ–º–∞–Ω–¥–∞:**
      ```bash
      cargo run -p bold-exec --bin bold-mem -- [--debug] <path/to/memoryfs.yaml>
      ```
    - –ü—Ä–∏–º–µ—Ä –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Linux:
      ```bash
      sudo mount.nfs4 -n -v -o fg,soft,sec=none,vers=4.0,port=11112,lookupcache=none,actimeo=0 127.0.0.1:/ /tmp/demo
      ```

2.  **Real FS (`bold-nfs`)**
    - –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π "—Ä–∞—Å—à–∞—Ä–∏–≤–∞–µ—Ç" —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.
    - **–ö–æ–º–∞–Ω–¥–∞:**
      ```bash
      cargo run -p bold-exec --bin bold-nfs -- <path/to/your/directory>
      ```
    - –ü—Ä–∏–º–µ—Ä –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω `bold-mem`.

---

## 8. Quality & Ops

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—Ä–µ–π—Ç `tracing`.
- –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`INFO` –∏–ª–∏ `DEBUG`) —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Ñ–ª–∞–≥–æ–º `--debug` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.
- –°–æ–æ–±—â–µ–Ω–∏—è –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ `stdout`.

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã. `TODO`: –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–ø–µ—Ä–∞—Ü–∏–π, –æ—à–∏–±–æ–∫, –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —Ç.–¥. —Å –ø–æ–º–æ—â—å—é `prometheus` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–≥–æ –∫—Ä–µ–π—Ç–∞.

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- **Unit-—Ç–µ—Å—Ç—ã:** –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–æ–¥—É–ª—è—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ `clientmanager.rs`. –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `cargo test`.
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ Rust, –Ω–æ –µ—Å—Ç—å Python-—Ç–µ—Å—Ç—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `tests/`.
  - `tests/integration/test_one_client.py`: –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –æ–¥–Ω–∏–º –∫–ª–∏–µ–Ω—Ç–æ–º.
  - `pyproject.toml` –∏ `poetry.lock` —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `poetry` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ Python.
  - `TODO`: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø–∏—Å–∞—Ç—å, –∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç–∏ —Ç–µ—Å—Ç—ã.

**CI/CD:**
- –§–∞–π–ª—ã CI/CD –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. `TODO`: –°–æ–∑–¥–∞—Ç—å GitHub Actions (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤.

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –º–µ—Ö–∞–Ω–∏–∑–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ `AUTH_NULL`.
- `TODO`: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ `RPCSEC_GSS`.
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Ç–µ–π: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `vfs`, —á—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –∞—Ç–∞–∫–∏ —Ç–∏–ø–∞ "path traversal", —Ç–∞–∫ –∫–∞–∫ –≤—Å–µ –ø—É—Ç–∏ —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ VFS.

---

## 9. Conventions & Examples

**–°—Ç–∏–ª—å –∫–æ–¥–∞:**
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `rustfmt`.
- –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω "–ê–∫—Ç–æ—Ä" –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (`ClientManager`, `FileManager`).
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ —Å `async/await` –∏ `tokio`.

**–ö–æ–º–º–∏—Ç—ã –∏ –≤–µ—Ç–∫–∏:**
- –°–æ–≥–ª–∞—à–µ–Ω–∏—è –Ω–µ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã.

**–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ (—à–∞–±–ª–æ–Ω—ã):**

- **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π NFS-–æ–ø–µ—Ä–∞—Ü–∏–∏:**
  1.  –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª `lib/src/server/nfs40/op_new_op.rs`.
  2.  –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (`NewOp4args`) –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–ª—è –Ω–µ–µ —Ç—Ä–µ–π—Ç `NfsOperation`.
  3.  –í `execute` —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –æ–ø–µ—Ä–∞—Ü–∏–∏.
  4.  –î–æ–±–∞–≤–∏—Ç—å `mod op_new_op;` –≤ `lib/src/server/nfs40.rs`.
  5.  –í `NFS40Server::compound` –¥–æ–±–∞–≤–∏—Ç—å –≤–µ—Ç–∫—É –¥–ª—è `NfsArgOp::OpNewOp(args) => args.execute(request).await`.
  6.  –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è `NewOp4args` –∏ `NewOp4res` –≤ `proto/src/nfs4_proto.rs`.

---

## 10. Open Questions & Risks

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:** –í—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏. –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤—Å–µ —Å–µ—Å—Å–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ —Ç.–¥. –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã. –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º—ã–º?
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ö–∞–∫ —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –ø–æ–¥ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π? –ê–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Å—Ç–∞—Ç—å —É–∑–∫–∏–º –º–µ—Å—Ç–æ–º. –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.
- **–ü–æ–ª–Ω–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ NFSv4.0:** –ú–Ω–æ–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è (`status: Nfs4errNotsupp`). –ö–∞–∫–∏–µ –∏–∑ –Ω–∏—Ö —è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏?
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞–¥–µ–∂–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —è–≤–ª—è–µ—Ç—Å—è —Å–µ—Ä—å–µ–∑–Ω—ã–º —Ä–∏—Å–∫–æ–º.
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –Ω–∞ Python –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ–±—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å CI (–∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç). –ö–∞–∫ –∏—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å?
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö —Å–≤–æ–¥–∏—Ç—Å—è –∫ `unwrap()` –∏–ª–∏ `todo!()`. –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–≤–∏–∑–∏—è –∏ –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞.

---

## 11. Changelog Summary

### 2025-09-16: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ UTF-8

- **–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ—Ä–≤–µ—Ä –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `StringIsNotAscii` –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ñ–∞–π–ª—ã —Å –Ω–µ-ASCII (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä—É—Å—Å–∫–∏–º–∏) –∏–º–µ–Ω–∞–º–∏.
- **–†–µ—à–µ–Ω–∏–µ:**
  - –í `proto/src/nfs4_proto.rs` —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Component4`, –ø–æ–ª–µ `id` –≤ `NfsClientId4`), –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã —Å `String` –Ω–∞ `Vec<u8>`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –∫–∞–∫ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –±–∞–π—Ç—ã –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ UTF-8, –∏–∑–±–µ–≥–∞—è –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ XDR-—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–∂–∏–¥–∞–µ—Ç ASCII.
  - –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (`op_*.rs`), –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —ç—Ç–∏ –ø–æ–ª—è, –±—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –º–µ–∂–¥—É `Vec<u8>` –∏ —Å—Ç—Ä–æ–∫–∞–º–∏ (`std::str::from_utf8`).
  - –í `ClientManager` –ø–æ–ª–µ `id` —É `ClientEntry` —Ç–∞–∫–∂–µ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ `Vec<u8>` –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏.
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–µ—Ä–≤–µ—Ä —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ñ–∞–π–ª—ã —Å –∏–º–µ–Ω–∞–º–∏ –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ UTF-8.


---

## 12. Project Structure Diagram

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞, –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É—é—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞, –∫–ª—é—á–µ–≤—ã–µ –º–æ–¥—É–ª–∏ –∏ –ª–æ–≥–∏–∫—É –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.

```markdown
**Bold NFS Server - Project Tree**
‚îÇ
‚îú‚îÄ‚îÄ üìÇ **exec/** ‚Äî (–¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞)
‚îÇ   ‚îú‚îÄ‚îÄ üìú **Cargo.toml**
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ `bold` (link to ../lib)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ `clap` (CLI-–∞—Ä–≥—É–º–µ–Ω—Ç—ã)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ `vfs` (–¥–ª—è PhysicalFS)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üöÄ **src/main.rs** ‚Äî (`bold-mem`)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üéØ **main()**: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞.
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‚öôÔ∏è –ü–∞—Ä—Å–∏—Ç CLI-–∞—Ä–≥—É–º–µ–Ω—Ç—ã (`clap`).
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ –ß–∏—Ç–∞–µ—Ç YAML-—Ñ–∞–π–ª, —Å–æ–∑–¥–∞–µ—Ç `MemoryFS` –∏–∑ `vfs`.
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üèÅ –°–æ–∑–¥–∞–µ—Ç `ServerBuilder` –∏–∑ `lib`, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç `NFSServer`.
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üöÄ **src/main_real_fs.rs** ‚Äî (`bold-nfs`)
‚îÇ       ‚îú‚îÄ‚îÄ üéØ **main()**: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞.
‚îÇ       ‚îú‚îÄ‚îÄ ‚öôÔ∏è –ü–∞—Ä—Å–∏—Ç CLI-–∞—Ä–≥—É–º–µ–Ω—Ç—ã (`clap`).
‚îÇ       ‚îú‚îÄ‚îÄ üóÑÔ∏è –°–æ–∑–¥–∞–µ—Ç `PhysicalFS` –∏–∑ `vfs` –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.
‚îÇ       ‚îî‚îÄ‚îÄ üèÅ –°–æ–∑–¥–∞–µ—Ç `ServerBuilder` –∏–∑ `lib`, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç `NFSServer`.
‚îÇ
‚îú‚îÄ‚îÄ üìÇ **lib/** ‚Äî (–Ø–¥—Ä–æ —Å–µ—Ä–≤–µ—Ä–∞)
‚îÇ   ‚îú‚îÄ‚îÄ üìú **Cargo.toml**
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ `bold-proto` (link to ../proto)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ `tokio` (–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–∞–Ω—Ç–∞–π–º)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ `vfs` (–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –§–°)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ `multi_index_map` (In-memory DB –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ `async-trait` (–î–ª—è —Ç—Ä–µ–π—Ç–æ–≤ —Å async-–º–µ—Ç–æ–¥–∞–º–∏)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìö **src/lib.rs**
‚îÇ       ‚îú‚îÄ‚îÄ ‚ú® `NFSServer`: –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞.
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ `start()`: –ó–∞–ø—É—Å–∫–∞–µ—Ç TCP-listener –≤ —Ä–∞–Ω—Ç–∞–π–º–µ `tokio`.
‚îÇ       ‚îú‚îÄ‚îÄ ‚ú® `ServerBuilder`: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä –¥–ª—è `NFSServer`.
‚îÇ       ‚îî‚îÄ‚îÄ üîÑ **–ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**:
‚îÇ           ‚îú‚îÄ‚îÄ 1. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `TcpStream`.
‚îÇ           ‚îú‚îÄ‚îÄ 2. –û–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –µ–≥–æ –≤ `Framed<_, XDRProtoCodec>` –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ RPC-—Å–æ–æ–±—â–µ–Ω–∏–π.
‚îÇ           ‚îú‚îÄ‚îÄ 3. –°–æ–∑–¥–∞–µ—Ç `NfsRequest` (–∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞).
‚îÇ           ‚îú‚îÄ‚îÄ 4. –ü–µ—Ä–µ–¥–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ `NFSService` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.
‚îÇ           ‚îî‚îÄ‚îÄ 5. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –∫–ª–∏–µ–Ω—Ç—É.
‚îÇ
‚îú‚îÄ‚îÄ üìÇ **lib/src/server/** ‚Äî (–ú–æ–¥—É–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üì¶ **mod.rs**: `NFSService` (–¥–∏—Å–ø–µ—Ç—á–µ—Ä RPC) –∏ `NfsProtoImpl` (—Ç—Ä–µ–π—Ç –¥–ª—è –≤–µ—Ä—Å–∏–π NFS).
‚îÇ   ‚îú‚îÄ‚îÄ üì¶ **nfs40.rs**: `NFS40Server` ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `NfsProtoImpl` –¥–ª—è NFSv4.0.
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ `compound()`: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `COMPOUND` –∑–∞–ø—Ä–æ—Å—ã, –≤—ã–∑—ã–≤–∞—è –Ω—É–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ **nfs40/**: –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö NFS-–æ–ø–µ—Ä–∞—Ü–∏–π (`op_*.rs`).
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìú `op_getattr.rs`, `op_read.rs`, etc.
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ `execute()`: –õ–æ–≥–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å `FileManager` –∏ `ClientManager`.
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üì¶ **request.rs**: `NfsRequest` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ö—Ä–∞–Ω—è—â–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ **filemanager/**: –ê–∫—Ç–æ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –§–°.
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìú **mod.rs**: `FileManager` (–∞–∫—Ç–æ—Ä) –∏ `run_file_manager` (—Ü–∏–∫–ª –∞–∫—Ç–æ—Ä–∞).
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìú **handle.rs**: `FileManagerHandle` ‚Äî —Ö–µ–Ω–¥–ª –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∞–∫—Ç–æ—Ä—É.
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìú **filehandle.rs**, **locking.rs**: In-memory "–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö" –¥–ª—è —Ö–µ–Ω–¥–ª–æ–≤ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ **clientmanager.rs**: –ê–∫—Ç–æ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏.
‚îÇ       ‚îú‚îÄ‚îÄ `ClientManager` (–∞–∫—Ç–æ—Ä), `run_client_manager` (—Ü–∏–∫–ª).
‚îÇ       ‚îú‚îÄ‚îÄ `ClientManagerHandle` (—Ö–µ–Ω–¥–ª –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π).
‚îÇ       ‚îî‚îÄ‚îÄ `ClientEntry`: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞.
‚îÇ
‚îî‚îÄ‚îÄ üìÇ **proto/** ‚Äî (–ü—Ä–æ—Ç–æ–∫–æ–ª –∏ –∫–æ–¥–µ–∫)
    ‚îú‚îÄ‚îÄ üìú **Cargo.toml**
    ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ `serde-xdr` (–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è)
    ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ `bytes`, `tokio-util` (–†–∞–±–æ—Ç–∞ —Å –±–∞–π—Ç–∞–º–∏ –∏ –∫–æ–¥–µ–∫–∞–º–∏)
    ‚îÇ
    ‚îú‚îÄ‚îÄ üìö **src/lib.rs**: `XDRProtoCodec` ‚Äî `tokio_util::codec` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è TCP-–ø–æ—Ç–æ–∫–∞ –≤ RPC-—Å–æ–æ–±—â–µ–Ω–∏—è.
    ‚îú‚îÄ‚îÄ üìú **src/rpc_proto.rs**: –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è RPC (Call, Reply).
    ‚îî‚îÄ‚îÄ üìú **src/nfs4_proto.rs**: –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è NFSv4.0 (–û–ø–µ—Ä–∞—Ü–∏–∏, –∞—Ç—Ä–∏–±—É—Ç—ã, —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö).
```
